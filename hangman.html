<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangman_movie</title>
    <link rel='stylesheet' href='G:\working\website development\font-awesome-icon-local\fontawesome-free-5.15.3-web\fontawesome-free-5.15.3-web\css\all.min.css'>
    <link rel='stylesheet' href='hang.css'>

</head>
<body>
    
    <div class="main-container">
        <div class='chance-container'>
            <h2 class='chance'>Press <span>next</span> button to start the game</h2>
        </div>
        <div class='question-container'>
            <h1 class='question'></h1>
        </div>
        <div class="three-features">
            <h4 class='how-to-play-btn'>how to play</h4>
            <div class="how-to-box">
                <p class='how-to-play'>This game is all about gussing and identifying the word.A word with some blank
                    spaces will be displayed on the board and a player has to fill those blanks within the available
                    chances.If chances gets over then only answer button will be enabled.To start the game , just Press
                    next button.A player has choice to choose the category for given words like months,movies,web series
                    or any as per given option.It can be selected at category button at right side.By default the 
                    word category is set as movie name.
                </p>
            </div>
            
            <h5 class='default-category'>Default category : Hindi movies</h5>
            <h4 class='select-category-btn'>select category</h4>
            
            <div class='category-box'>
                <ul class='category-list'>
                    <li class='item '>Hindi Movies</li>
                    <li class='item '>Web Series</li>
                    <li class='item '>Months Name</li>
                    <li class='item '>Fruits</li>
                    <li class='item '>Animals</li>
                    <li class='item '>General Items</li>
                    <p>more to come...</p>
                </ul>
            </div>
        </div>
        <div class="abcd-container">
            <div class='abcd-divs'>
                <button class='abcd-btn A'>A</button>
                <button class='abcd-btn B'>B</button>
                <button class='abcd-btn C'>C</button>
                <button class='abcd-btn D'>D</button>
                <button class='abcd-btn E'>E</button>
                <button class='abcd-btn F'>F</button>
                <button class='abcd-btn G'>G</button>
            </div>
            <div class='abcd-divs'>
                <button class='abcd-btn H'>H</button>
                <button class='abcd-btn I'>I</button>
                <button class='abcd-btn J'>J</button>
                <button class='abcd-btn K'>K</button>
                <button class='abcd-btn L'>L</button>
                <button class='abcd-btn M'>M</button>
                <button class='abcd-btn N'>N</button>
            </div>
            <div class='abcd-divs'>
                <button class='abcd-btn O'>O</button>
                <button class='abcd-btn P'>P</button>
                <button class='abcd-btn Q'>Q</button>
                <button class='abcd-btn R'>R</button>
                <button class='abcd-btn S'>S</button>
                <button class='abcd-btn T'>T</button>
                <button class='abcd-btn U'>U</button>
            </div>
            <div class='abcd-divs'>
                <button class='abcd-btn V'>V</button>
                <button class='abcd-btn W'>W</button>
                <button class='abcd-btn X'>X</button>
                <button class='abcd-btn Y'>Y</button>
                <button class='abcd-btn Z'>Z</button>
            </div>
        </div>
        <div class='answer-container'></div>
        <div class="button-container">
            <button class='btn answer'>answer</button>
            <button class='btn next'>next</button>
            <div class='answer-box'>
                <h3 class='answer-box-h3'></h3>
            </div>
        </div>
        
    </div>

    <script>

        

        var movies = ["DON","JOLLYLLB","RUSTAM","BHARAT","SWARG"];
        
        var fruits = ["MANGO","APPLE"];
        var months = ["JANUARY","FEBRUARY"];
        var web_series = ["MIRJAPUR","PANCHAYAT"];
        var general_items = ["CAR","WATCH","PEN"];
        var animals = ["COW","HORSE","LION","TIGER"];
        var category = [movies,web_series,months,fruits,animals,general_items];
        var default_category_list = ["Hindi movies","Web series","Months","Fruits","Animals","General items"];
        var current_category = movies;
        var Q_sequence_bag = [];
        var Q_sequence_bag_capacity = current_category.length;
        var current_Q = "";
        var user_input = "";
        var current_Q_index;
        var Q_status = [];
        var Q_status_display = "";
        var initial_chance = 8;
        var chances_left = initial_chance;
        var answer_list = [];
        //element selector 
        const chance = document.querySelector(".chance");
        const abcd_buttons = document.querySelectorAll(".abcd-btn");
        const next_btn = document.querySelector(".next");
        const answer_btn = document.querySelector(".answer");
        const answer_box = document.querySelector(".answer-box");
        const answer_box_h3 = document.querySelector(".answer-box-h3");
        const question = document.querySelector(".question");
        const how_to_box = document.querySelector(".how-to-box");
        const how_to_play_btn = document.querySelector(".how-to-play-btn");
        const category_box = document.querySelector(".category-box");
        const select_category_btn = document.querySelector(".select-category-btn");
        const category_items = document.querySelectorAll(".item");
        const default_category = document.querySelector(".default-category");

        question.textContent = "Welcome"
        select_category_btn.addEventListener("click",() => {
            category_box.classList.toggle("pop-up-category-box");
        });
        how_to_play_btn.addEventListener("click",() => {
            how_to_box.classList.toggle("pop-up-how-to-box");
        });
        
        category_items.forEach(function(ele,index){
            ele.addEventListener("click",function(){
                current_category = category[index];
                Q_sequence_bag_capacity = current_category.length; 
                Q_sequence_bag.splice(0);
                category_box.classList.remove("pop-up-category-box");
                default_category.textContent="Category selected : "+default_category_list[index];
            });
        });

        // category_items.forEach(function(ele){
        //     ele.addEventListener("click",function(em){
        //         const li_specific = em.currentTarget.classList;  
        //         if(li_specific.contains("movies"))
        //             current_category = movies;     
        //         else if(li_specific.contains("web_series"))
        //             current_category = web_series; 
        //         else if(li_specific.contains("months"))
        //             current_category = months; 
        //         else if(li_specific.contains("fruits"))
        //             current_category = fruits; 
        //         else if(li_specific.contains("animals"))
        //             current_category = animals; 
        //         else if(li_specific.contains("general_items"))
        //             current_category = general_items;          
        //     });
        // });
        abcd_buttons.forEach(function(element){
            element.addEventListener("click",function (e){
                const ele_specific = e.currentTarget.classList;
                if(ele_specific.contains("A"))
                    user_input = "A";
                else if(ele_specific.contains("B"))
                    user_input = "B";
                else if(ele_specific.contains("C"))
                    user_input = "C";
                else if(ele_specific.contains("D"))
                    user_input = "D";
                else if(ele_specific.contains("E"))
                    user_input = "E";
                else if(ele_specific.contains("F"))
                    user_input = "F";
                else if(ele_specific.contains("G"))
                    user_input = "G";
                else if(ele_specific.contains("H"))
                    user_input = "H";
                else if(ele_specific.contains("I"))
                    user_input = "I";
                else if(ele_specific.contains("J"))
                    user_input = "J";
                else if(ele_specific.contains("K"))
                    user_input = "K";
                else if(ele_specific.contains("L"))
                    user_input = "L";
                else if(ele_specific.contains("M"))
                    user_input = "M";
                else if(ele_specific.contains("N"))
                    user_input = "N";
                else if(ele_specific.contains("O"))
                    user_input = "O";
                else if(ele_specific.contains("P"))
                    user_input = "P";
                else if(ele_specific.contains("Q"))
                    user_input = "Q";
                else if(ele_specific.contains("R"))
                    user_input = "R";
                else if(ele_specific.contains("S"))
                    user_input = "S";
                else if(ele_specific.contains("T"))
                    user_input = "T";
                else if(ele_specific.contains("U"))
                    user_input = "U";
                else if(ele_specific.contains("V"))
                    user_input = "V";
                else if(ele_specific.contains("W"))
                    user_input = "W";
                else if(ele_specific.contains("X"))
                    user_input = "X";
                else if(ele_specific.contains("Y"))
                    user_input = "Y";
                else 
                    user_input = "Z";
                
                check_input_validity(user_input);
            // update_all
            question.textContent = Q_status_display;
            chance.textContent = "Chances left : " + chances_left;
            });
        });
        
        next_btn.addEventListener("click",() =>{
            let index;
            if(Q_sequence_bag.length == Q_sequence_bag_capacity)
            {
                Q_sequence_bag.splice(0);
                index = getRandomNumber(0,current_category.length-1);
                Q_sequence_bag.push(index);
            }
            else
            {
                while(true)
                {
                    index = getRandomNumber(0,current_category.length-1);
                    if(Q_sequence_bag.indexOf(index)==-1)
                        {
                            Q_sequence_bag.push(index);
                            break;
                        }
                }  
            }
            current_Q = generateQuestion(current_category[index]);
            current_Q_index = index;
            answer_list = string_to_list_convertor(current_category[index]);
            Q_status = string_to_list_convertor(current_Q);
            Q_status_display = current_Q;
            chances_left = initial_chance;
            answer_btn.removeEventListener("click",show_answer);
            if(answer_box.classList.contains("pop-up-answer"))
                answer_box.classList.remove("pop-up-answer");
            if(how_to_box.classList.contains("pop-up-how-to-box"))
                how_to_box.classList.remove("pop-up-how-to-box");
            if(category_box.classList.contains("pop-up-category-box"))
                category_box.classList.remove("pop-up-category-box");
            answer_btn.style.opacity=0.5;
            // update_all
            question.textContent = current_Q;
            chance.textContent = "Total chances : " + chances_left;
        });

        //getrandomNumber -- gives random number between two number both inclusive.
        function getRandomNumber(min,max){
            return (Math.floor((Math.random()*(max-min+1))+min));
        }

        // randommList -- giver list of n random number between zero to given range.
        function randomList(how_many,between_zero_and){
            if(how_many > between_zero_and)
            {
                how_many = between_zero_and+1 ;
            }
            let l = [];
            while(l.length!=how_many)
            {
                let rn = getRandomNumber(0,between_zero_and);
                while(l.indexOf(rn)==-1)
                    l.push(rn);
            }
            return l;
        }
        // generateQuestion convert any string passed to fill in the blanks type. eg...mohan = m_h_an
        function generateQuestion(str){
            let len = str.length;
            let total_space = getRandomNumber(Math.floor(len/2),Math.floor(len/2+1));
            let space_list = randomList(total_space,len-1);
            let question_array = [];
            for(let i=0;i<len;i++)  //convert str to list
            {
                question_array.push(str[i]);
            }
            for(let i=0;i<question_array.length;i++)  // making fill in the blanks
            {
                question_array[space_list[i]] = "-";
            }
            let question_str = "";
            for(let i=0;i<question_array.length;i++) // convert list to str question
            {
                question_str += question_array[i];
            }
            
            return question_str;
        }

        function string_to_list_convertor(str){
            let list = [];
            for(let i=0;i<str.length;i++)
            {
                list.push(str[i]);
            }
            return list;
        }
        function list_to_string_convertor(list){
            let str = "";
            for(let i=0;i<list.length;i++)
            {
                str += list[i];
            }
            return str;
        }

        function check_input_validity(user_input){
            let flag = 0;
            let i;
            for(i=0;i<answer_list.length;i++)
            {
                if(Q_status[i]=="-")
                {
                    if(answer_list[i] == user_input)
                    {
                        Q_status[i] = user_input;
                        flag = 1;
                    }
                }
            }
            if(flag==0)
            {
                if(chances_left>1)
                {
                    chances_left--;
                }
                else{
                    chances_left = "Answer button enabled";
                    answer_btn.addEventListener("click",show_answer);
                    answer_btn.style.opacity=1;
                }
            }

            Q_status_display = list_to_string_convertor(Q_status);
            
            if(list_to_string_convertor(answer_list)==Q_status_display)
            {
                answer_btn.addEventListener("click",show_answer);
                answer_btn.style.opacity=1;  
            }
        }

        function show_answer(){
            answer_box.classList.toggle("pop-up-answer");
            answer_box_h3.textContent=list_to_string_convertor(answer_list);
        }
        
        

    </script>
</body>
</html>